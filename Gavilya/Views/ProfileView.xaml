<UserControl
    x:Class="Gavilya.Views.ProfileView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:components="clr-namespace:Gavilya.Components"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:lang="clr-namespace:Gavilya.Properties"
    xmlns:local="clr-namespace:Gavilya.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:Gavilya.ViewModels"
    d:DesignHeight="850"
    d:DesignWidth="800"
    FontFamily="..\Fonts\#Hauora"
    Foreground="{DynamicResource Foreground}"
    mc:Ignorable="d">
    <Grid x:Name="PageContent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Popup
            AllowsTransparency="True"
            IsOpen="{Binding IsProfileEditorOpen}"
            Placement="Center"
            PlacementTarget="{Binding ElementName=ProfileHeader}">
            <Border
                Margin="10"
                Padding="10"
                Background="{DynamicResource Background2}"
                CornerRadius="10">
                <StackPanel Margin="10" Orientation="Vertical">
                    <StackPanel
                        Margin="0 0 0 10"
                        VerticalAlignment="Top"
                        Orientation="Horizontal">
                        <Rectangle
                            Width="50"
                            Height="50"
                            Margin="10"
                            HorizontalAlignment="Center"
                            RadiusX="25"
                            RadiusY="25">
                            <Rectangle.Fill>
                                <ImageBrush ImageSource="{Binding EditProfilePicture}" />
                            </Rectangle.Fill>
                        </Rectangle>

                        <Button
                            x:Name="BrowseBtn"
                            Padding="5"
                            VerticalAlignment="Center"
                            Background="{DynamicResource Background2}"
                            Command="{Binding PopupBrowseCommand}"
                            Cursor="Hand"
                            FontSize="13"
                            Style="{StaticResource RegularButton}">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock
                                    Margin="0 0 10 0"
                                    VerticalAlignment="Center"
                                    FontFamily="..\Fonts\#FluentSystemIcons-Regular"
                                    FontSize="12"
                                    Foreground="{DynamicResource Foreground}"
                                    Text="&#xF42F;" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    FontWeight="ExtraBold"
                                    Foreground="{DynamicResource Foreground}"
                                    Text="{x:Static lang:Resources.Browse}" />
                            </StackPanel>

                            <Button.ToolTip>
                                <ToolTip
                                    Background="{DynamicResource Background}"
                                    Content="{x:Static lang:Resources.Browse}"
                                    Foreground="{DynamicResource Foreground}" />
                            </Button.ToolTip>
                        </Button>

                        <Button
                            x:Name="ResetProfilePictureBtn"
                            Margin="10 0 0 0"
                            Padding="5"
                            VerticalAlignment="Center"
                            Background="{DynamicResource Background2}"
                            Command="{Binding PopupResetCommand}"
                            Cursor="Hand"
                            FontSize="13"
                            Style="{StaticResource RegularButton}">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock
                                    Margin="0 0 10 0"
                                    VerticalAlignment="Center"
                                    FontFamily="..\Fonts\#FluentSystemIcons-Regular"
                                    FontSize="12"
                                    Foreground="{DynamicResource Foreground}"
                                    Text="&#xF140;" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    FontWeight="ExtraBold"
                                    Foreground="{DynamicResource Foreground}"
                                    Text="{x:Static lang:Resources.Reset}" />
                            </StackPanel>

                            <Button.ToolTip>
                                <ToolTip
                                    Background="{DynamicResource Background}"
                                    Content="{x:Static lang:Resources.Reset}"
                                    Foreground="{DynamicResource Foreground}" />
                            </Button.ToolTip>
                        </Button>

                    </StackPanel>
                    <StackPanel VerticalAlignment="Top" Orientation="Horizontal">
                        <TextBlock
                            VerticalAlignment="Center"
                            FontWeight="ExtraBold"
                            Foreground="{DynamicResource Foreground}"
                            Text="{x:Static lang:Resources.Name}" />
                        <TextBox
                            Name="nameTxt"
                            Width="250"
                            Margin="10 0 0 0"
                            VerticalAlignment="Center"
                            Background="{DynamicResource SelectedBackground}"
                            BorderBrush="Transparent"
                            BorderThickness="0"
                            FontSize="15"
                            Foreground="{DynamicResource Foreground}"
                            Style="{DynamicResource RegularTextBox}"
                            Text="{Binding EditProfileName, UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>
                    <StackPanel
                        Grid.ColumnSpan="5"
                        HorizontalAlignment="Center"
                        Orientation="Horizontal">
                        <Button
                            x:Name="OKBtn"
                            MinWidth="50"
                            Margin="5 5 10 10"
                            Padding="5"
                            Background="{DynamicResource Background2}"
                            Command="{Binding PopupAddCommand}"
                            Content="{x:Static lang:Resources.Add}"
                            Cursor="Hand"
                            FontWeight="ExtraBold"
                            Foreground="{DynamicResource Foreground}"
                            Style="{StaticResource RegularButton}" />
                        <Button
                            x:Name="CancelBtn"
                            MinWidth="50"
                            Margin="5 5 10 10"
                            Padding="5"
                            Background="{DynamicResource Background2}"
                            Command="{Binding PopupCancelCommand}"
                            Content="{x:Static lang:Resources.Cancel}"
                            Cursor="Hand"
                            FontWeight="ExtraBold"
                            Foreground="{DynamicResource Foreground}"
                            Style="{StaticResource RegularButton}" />
                    </StackPanel>
                </StackPanel>
            </Border>
        </Popup>

        <StackPanel Margin="10" Orientation="Horizontal">
            <TextBlock
                VerticalAlignment="Center"
                FontFamily="..\Fonts\#FluentSystemIcons-Filled"
                FontSize="18"
                Text="&#xF5C8;" />
            <TextBlock
                Margin="10 0 0 0"
                VerticalAlignment="Center"
                FontSize="18"
                FontWeight="ExtraBold"
                Text="{x:Static lang:Resources.Profiles}" />
        </StackPanel>
        <StackPanel Grid.Row="1">
            <Border
                Margin="5"
                Padding="5"
                HorizontalAlignment="Center"
                Background="{DynamicResource Background2}"
                CornerRadius="5">
                <Grid x:Name="ProfileSwitcher">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <ItemsControl ItemsSource="{Binding ProfilesVm}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate DataType="{x:Type vm:ProfileCompViewModel}">
                                <components:ProfileComponent />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                    <Button
                        x:Name="AddProfileBtn"
                        Grid.Row="1"
                        Padding="5"
                        Background="Transparent"
                        Command="{Binding AddProfileCommand}"
                        Foreground="{DynamicResource Foreground}"
                        Style="{DynamicResource RegularButton}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock
                                Margin="0 0 5 0"
                                VerticalAlignment="Center"
                                FontFamily="../Fonts/#FluentSystemIcons-Regular"
                                FontSize="16"
                                Text="&#xF10A;" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="14"
                                FontWeight="Bold"
                                Text="{x:Static lang:Resources.AddProfile}" />
                        </StackPanel>
                    </Button>
                </Grid>
            </Border>
            <StackPanel Margin="10" Orientation="Horizontal">
                <TextBlock
                    VerticalAlignment="Center"
                    FontFamily="..\Fonts\#FluentSystemIcons-Filled"
                    FontSize="18"
                    Text="&#xF4AB;" />
                <TextBlock
                    Margin="10 0 0 0"
                    VerticalAlignment="Center"
                    FontSize="18"
                    FontWeight="ExtraBold"
                    Text="{x:Static lang:Resources.AboutYou}" />
            </StackPanel>

            <Grid x:Name="ProfileHeader">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <Rectangle
                        Width="100"
                        Height="100"
                        Margin="10"
                        HorizontalAlignment="Center"
                        RadiusX="50"
                        RadiusY="50">
                        <Rectangle.Fill>
                            <ImageBrush x:Name="ProfilePicture" ImageSource="{Binding ProfilePicture}" />
                        </Rectangle.Fill>
                    </Rectangle>
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock
                            x:Name="ProfileNameTxt"
                            Margin="10 0 0 0"
                            VerticalAlignment="Center"
                            d:Text="Profile name"
                            FontSize="36"
                            FontWeight="ExtraBold"
                            Text="{Binding ProfileName}" />
                    </StackPanel>
                </StackPanel>

                <Button
                    x:Name="EditBtn"
                    Grid.Column="1"
                    Margin="5"
                    Padding="5"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Center"
                    Background="{DynamicResource Background2}"
                    Command="{Binding EditCommand}"
                    FontSize="13"
                    Foreground="{DynamicResource Foreground}"
                    Style="{StaticResource RegularButton}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock
                            Margin="0 0 5 0"
                            VerticalAlignment="Center"
                            FontFamily="..\Fonts\#FluentSystemIcons-Regular"
                            Text="&#xF3DE;" />
                        <TextBlock VerticalAlignment="Center" Text="{x:Static lang:Resources.Edit}" />
                    </StackPanel>

                    <Button.ToolTip>
                        <ToolTip
                            Background="{DynamicResource Background}"
                            Content="{x:Static lang:Resources.Edit}"
                            Foreground="{DynamicResource Foreground}" />
                    </Button.ToolTip>
                </Button>
            </Grid>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Border
                    Margin="10"
                    Padding="10"
                    Background="{DynamicResource Background}"
                    BorderBrush="{DynamicResource SelectedBackground}"
                    BorderThickness="2"
                    CornerRadius="10">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock
                                FontSize="13"
                                FontWeight="SemiBold"
                                Text="{x:Static lang:Resources.TotalTimePlayed}" />
                            <TextBlock
                                d:Text="337.0h"
                                FontSize="18"
                                FontWeight="Bold"
                                Text="{Binding TotalText}" />
                            <TextBlock
                                FontSize="11"
                                Foreground="{DynamicResource LightForeground}"
                                Text="{x:Static lang:Resources.TotalPlaytimeDesc}" />
                        </StackPanel>
                        <TextBlock
                            Grid.Column="1"
                            HorizontalAlignment="Right"
                            FontFamily="..\Fonts\#FluentSystemIcons-Regular"
                            FontSize="18"
                            Foreground="{DynamicResource SelectedBackground}"
                            Text="&#xF2DE;" />
                    </Grid>
                </Border>
                <Border
                    Grid.Column="1"
                    Margin="10"
                    Padding="10"
                    Background="{DynamicResource Background}"
                    BorderBrush="{DynamicResource SelectedBackground}"
                    BorderThickness="2"
                    CornerRadius="10">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock
                                FontSize="13"
                                FontWeight="SemiBold"
                                Text="{x:Static lang:Resources.Library}" />
                            <TextBlock
                                d:Text="21"
                                FontSize="18"
                                FontWeight="Bold"
                                Text="{Binding TotalGamesText}" />
                            <TextBlock
                                d:Text="4 played this month"
                                FontSize="11"
                                Foreground="{DynamicResource LightForeground}"
                                Text="{Binding TotalGamesTextDesc}" />
                        </StackPanel>
                        <TextBlock
                            Grid.Column="1"
                            HorizontalAlignment="Right"
                            FontFamily="..\Fonts\#FluentSystemIcons-Regular"
                            FontSize="18"
                            Foreground="{DynamicResource SelectedBackground}"
                            Text="&#xF451;" />
                    </Grid>
                </Border>
                <Border
                    Grid.Column="2"
                    Margin="10"
                    Padding="10"
                    Background="{DynamicResource Background}"
                    BorderBrush="{DynamicResource SelectedBackground}"
                    BorderThickness="2"
                    CornerRadius="10">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock
                                FontSize="13"
                                FontWeight="SemiBold"
                                Text="{x:Static lang:Resources.LastSession}" />
                            <TextBlock
                                d:Text="7 days"
                                FontSize="18"
                                FontWeight="Bold"
                                Text="{Binding LastSessionText}" />
                            <TextBlock
                                d:Text="Personnal Record"
                                FontSize="11"
                                Foreground="{DynamicResource LightForeground}"
                                Text="{x:Static lang:Resources.LastSessionDesc}" />
                        </StackPanel>
                        <TextBlock
                            Grid.Column="1"
                            HorizontalAlignment="Right"
                            FontFamily="..\Fonts\#FluentSystemIcons-Regular"
                            FontSize="18"
                            Foreground="{DynamicResource SelectedBackground}"
                            Text="&#xF343;" />
                    </Grid>
                </Border>

                <Border
                    Grid.Row="1"
                    Grid.ColumnSpan="2"
                    Margin="10"
                    Padding="10"
                    Background="{DynamicResource Background}"
                    BorderBrush="{DynamicResource SelectedBackground}"
                    BorderThickness="2"
                    CornerRadius="10">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock
                                VerticalAlignment="Center"
                                FontFamily="..\Fonts\#FluentSystemIcons-Regular"
                                FontSize="18"
                                Text="&#xF8EB;" />
                            <TextBlock
                                Margin="10 0 0 0"
                                VerticalAlignment="Center"
                                FontSize="18"
                                FontWeight="Bold"
                                Text="{x:Static lang:Resources.TopGames}" />
                        </StackPanel>
                        <ItemsControl ItemsSource="{Binding TopGames}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate DataType="{x:Type vm:StatGameViewModel}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <Border
                                            Width="40"
                                            Height="40"
                                            Padding="5"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Background="{DynamicResource SelectedBackground}"
                                            CornerRadius="50">
                                            <TextBlock
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                FontSize="16"
                                                FontWeight="ExtraBold"
                                                Foreground="{DynamicResource Foreground}"
                                                Text="{Binding Index}" />
                                        </Border>
                                        <Rectangle
                                            Grid.Column="1"
                                            Width="50"
                                            Height="80"
                                            Margin="10">
                                            <Rectangle.Fill>
                                                <ImageBrush
                                                    x:Name="GameImg1"
                                                    ImageSource="{Binding CoverFilePath}"
                                                    Stretch="UniformToFill" />
                                            </Rectangle.Fill>
                                        </Rectangle>
                                        <StackPanel
                                            Grid.Column="2"
                                            Margin="10 0 0 0"
                                            VerticalAlignment="Center">
                                            <TextBlock
                                                x:Name="GameName1"
                                                VerticalAlignment="Center"
                                                d:Text="GameName"
                                                FontSize="18"
                                                FontWeight="ExtraBold"
                                                Text="{Binding Name}" />
                                            <TextBlock
                                                x:Name="Game1TimeTxt"
                                                VerticalAlignment="Center"
                                                d:Text="10,3h"
                                                FontWeight="Normal"
                                                Foreground="{DynamicResource LightForeground}"
                                                Text="{Binding TotalTimePlayed}" />
                                        </StackPanel>
                                        <ProgressBar
                                            x:Name="Graph"
                                            Grid.Column="3"
                                            Width="100"
                                            Height="20"
                                            Margin="5"
                                            VerticalAlignment="Center"
                                            Background="{DynamicResource Background2}"
                                            BorderThickness="0"
                                            Foreground="{DynamicResource SelectedBackground}"
                                            Maximum="100"
                                            Minimum="0"
                                            Style="{DynamicResource ProgressBarStyle1}"
                                            Value="{Binding PlayTimeProgress}" />
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>

                <Border
                    Grid.Row="1"
                    Grid.Column="2"
                    Margin="10"
                    Padding="10"
                    Background="{DynamicResource Background}"
                    BorderBrush="{DynamicResource SelectedBackground}"
                    BorderThickness="2"
                    CornerRadius="10">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock
                                VerticalAlignment="Center"
                                FontFamily="..\Fonts\#FluentSystemIcons-Regular"
                                FontSize="18"
                                Text="&#xF8C3;" />
                            <TextBlock
                                Margin="10 0 0 0"
                                VerticalAlignment="Center"
                                FontSize="18"
                                FontWeight="Bold"
                                Text="{x:Static lang:Resources.Platforms}" />
                        </StackPanel>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <TextBlock
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontFamily="..\Fonts\#FluentSystemIcons-Regular"
                                FontSize="16"
                                Text="&#xF451;" />
                            <TextBlock
                                Grid.Column="1"
                                Margin="10 0 0 0"
                                VerticalAlignment="Center"
                                FontSize="14"
                                FontWeight="SemiBold"
                                Text="Steam" />
                            <ProgressBar
                                Grid.Column="2"
                                Width="50"
                                Height="20"
                                Margin="0 5"
                                VerticalAlignment="Center"
                                Background="{DynamicResource Background2}"
                                BorderThickness="0"
                                Foreground="{DynamicResource SelectedBackground}"
                                Maximum="{Binding GamesCount}"
                                Minimum="0"
                                Style="{DynamicResource ProgressBarStyle1}"
                                Value="{Binding SteamGamesCount}" />

                            <TextBlock
                                Grid.Row="1"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontFamily="..\Fonts\#FluentSystemIcons-Regular"
                                FontSize="16"
                                Text="&#xF732;" />
                            <TextBlock
                                Grid.Row="1"
                                Grid.Column="1"
                                Margin="10 0 0 0"
                                VerticalAlignment="Center"
                                FontSize="14"
                                FontWeight="SemiBold"
                                Text="UWP" />
                            <ProgressBar
                                Grid.Row="1"
                                Grid.Column="2"
                                Width="50"
                                Height="20"
                                Margin="0 5"
                                VerticalAlignment="Center"
                                Background="{DynamicResource Background2}"
                                BorderThickness="0"
                                Foreground="{DynamicResource SelectedBackground}"
                                Maximum="{Binding GamesCount}"
                                Minimum="0"
                                Style="{DynamicResource ProgressBarStyle1}"
                                Value="{Binding MicrosoftGamesCount}" />
                            <TextBlock
                                Grid.Row="2"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontFamily="..\Fonts\#FluentSystemIcons-Regular"
                                FontSize="16"
                                Text="&#xF4C4;" />
                            <TextBlock
                                Grid.Row="2"
                                Grid.Column="1"
                                Margin="10 0 0 0"
                                VerticalAlignment="Center"
                                FontSize="14"
                                FontWeight="SemiBold"
                                Text="Win32" />
                            <ProgressBar
                                Grid.Row="2"
                                Grid.Column="2"
                                Width="50"
                                Height="20"
                                Margin="0 5"
                                VerticalAlignment="Center"
                                Background="{DynamicResource Background2}"
                                BorderThickness="0"
                                Foreground="{DynamicResource SelectedBackground}"
                                Maximum="{Binding GamesCount}"
                                Minimum="0"
                                Style="{DynamicResource ProgressBarStyle1}"
                                Value="{Binding ClassicGamesCount}" />
                        </Grid>
                    </StackPanel>

                </Border>
            </Grid>
        </StackPanel>
    </Grid>
</UserControl>
